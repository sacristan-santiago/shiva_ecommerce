(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{49:function(e,t,c){},50:function(e,t,c){},58:function(e,t,c){"use strict";c.r(t);var n=c(6),r=c.n(n),a=c(41),s=c.n(a),i=(c(49),c(50),c(16)),o=c(12),l=c(25),j=c(11),d=c(3),b=Object(n.createContext)();function u(e){var t=e.defaultValue,c=void 0===t?[]:t,r=e.children,a=Object(n.useState)(c),s=Object(j.a)(a,2),i=s[0],o=s[1],u=function(e){return i.some((function(t){return t.id===e}))};return Object(d.jsx)(b.Provider,{value:{cart:i,removeItem:function(e){var t=i.filter((function(t){return t.id!=e}));o(t)},clearCart:function(){return o([])},isInCart:u,addItem:function(e,t){if(u(e.id))i.find((function(t){return t.id===e.id})).quantity+=t,o(i),console.log("se modifico la cantidad del item: ".concat(e.id)),console.log("nuevo carrito: ",i);else{var c=e;e.quantity=t,o([].concat(Object(l.a)(i),[c])),console.log("se actualizo el estado del carrito"),console.log("nuevo carrito: ",i)}}},children:r})}var h=function(){var e=Object(n.useContext)(b).cart.length;return 0!=e?Object(d.jsxs)(i.b,{className:"nav-link shopping-cart",to:"/cart",children:[Object(d.jsx)("span",{children:e}),Object(d.jsx)("span",{className:"material-icons shopping-cart",children:"shopping_cart"})]}):Object(d.jsx)(d.Fragment,{})},O=function(){return Object(d.jsxs)("nav",{className:"header_nav",children:[Object(d.jsx)("h1",{children:Object(d.jsx)(i.b,{className:"nav-link",to:"/",children:"SH/VA"})}),Object(d.jsx)("ul",{children:Object(d.jsx)("li",{children:Object(d.jsx)(i.b,{activeclassname:"currentCategory",className:"nav-link",to:"/categoria/crackers",children:"Crackers"})})}),Object(d.jsx)(h,{})]})},m=c(0),x=c.n(m),p=c(4),f=function(e){var t=e.producto,c=t.title,n=t.description,r=t.image,a=t.id,s="/item/".concat(a);return Object(d.jsxs)("div",{className:"card",style:{width:"20%",backgroundColor:"gray"},children:[Object(d.jsx)("img",{src:"https://sacristan-santiago.github.io/".concat(r),className:"card-img-top",alt:"..."}),Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsx)("h5",{className:"card-title",children:c}),Object(d.jsx)("p",{style:{height:"15vh",overflow:"hidden"},className:"card-text",children:n})]}),Object(d.jsx)(i.b,{className:"nav-link",to:s,children:Object(d.jsx)("button",{type:"button",className:"btn btn-dark",children:"Comprar"})})]})},g=function(e){var t=e.productos;return Object(d.jsx)(d.Fragment,{children:t.map((function(e){return Object(d.jsx)(f,{producto:e},e.title)}))})},v=c(44),y=Object(v.a)({apiKey:"AIzaSyCsqDOpjZQ9IIEvJGfBYGRTwjwnNHm7hzI",authDomain:"shiva-53202.firebaseapp.com",projectId:"shiva-53202",storageBucket:"shiva-53202.appspot.com",messagingSenderId:"1021999300277",appId:"1:1021999300277:web:1d03b30e5d2e63840888fc"}),k=c(17),N=function(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),c=t[0],r=t[1],a=Object(o.f)().categoryId;return Object(n.useEffect)((function(){function e(){return(e=Object(p.a)(x.a.mark((function e(){var t,c,n,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Object(k.e)(y),c=Object(k.f)(Object(k.c)(t,"items"),Object(k.g)("category","==",a)),e.next=5,Object(k.d)(c);case 5:if(n=e.sent,s=[],n.forEach((function(e){var t=e.data();t.id=e.id,s.push(t)})),0!==!k.c.size){e.next=11;break}return console.log("Collection does not exist"),e.abrupt("return");case 11:console.log("Collection found"),r(s),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log("Error serching items",e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),c.length<=0?Object(d.jsx)(d.Fragment,{children:"Cargando..."}):Object(d.jsx)("div",{className:"Productos-list container",children:Object(d.jsx)(g,{productos:c})})},C=function(e){var t=Object(n.useState)(e.initial),c=Object(j.a)(t,2),r=c[0],a=c[1];return Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"Item-count",children:[Object(d.jsx)("button",{className:"btn btn-dark",onClick:function(){r>0&&a(r-1)},children:" - "}),Object(d.jsxs)("p",{children:[" Contador: ",r," "]}),Object(d.jsx)("button",{className:"btn btn-dark",onClick:function(){r<e.stock&&a(r+1)},children:" + "})]}),Object(d.jsx)("button",{className:"btn btn-dark",onClick:function(){r<=e.stock&&e.onAdd(r)},children:" Agregar al carrito "})]})},w=function(e){var t=e.item,c=t.title,r=t.description,a=t.image,s=t.price,o=t.stock,l=Object(n.useContext)(b).addItem;return Object(d.jsxs)("div",{className:"card",style:{width:"20%",backgroundColor:"gray"},children:[Object(d.jsx)("img",{src:a,className:"card-img-top",alt:"..."}),Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsx)("h5",{className:"card-title",children:c}),Object(d.jsx)("p",{style:{height:"10vh",overflow:"hidden"},className:"card-text",children:r}),Object(d.jsxs)("p",{className:"card-text",children:["Precio: $",s,"/unidad"]}),Object(d.jsx)(C,{stock:o,initial:1,onAdd:function(t){l(e.item,t)}})]}),Object(d.jsx)("button",{className:"btn btn-dark",children:Object(d.jsx)(i.b,{className:"nav-link-detail-button",to:"/",children:"Volver"})})]})},I=c(23),S=function(){var e=Object(n.useState)({}),t=Object(j.a)(e,2),c=t[0],r=t[1],a=Object(o.f)().id;return console.log(a),Object(n.useEffect)((function(){function e(){return(e=Object(p.a)(x.a.mark((function e(){var t,n,s,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Object(k.e)(y),n=Object(I.d)(t,"items",a),e.next=5,Object(I.e)(n);case 5:(s=e.sent).exists()?(console.log("Collection found"),(i=s.data()).id=s.id,r(i),console.log(c)):console.log("Collection does not exist"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Error serching items",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),c.id?Object(d.jsx)("div",{className:"Items-gallery",children:Object(d.jsx)(w,{item:c})}):Object(d.jsx)(d.Fragment,{children:"Cargando..."})},E=function(e){var t=e.category,c=(t.description,t.image),n=t.category,r="/categoria/".concat(n);return Object(d.jsxs)("div",{className:"card",style:{width:"20%",backgroundColor:"gray"},children:[Object(d.jsx)("img",{src:c,className:"card-img-top",alt:"..."}),Object(d.jsx)("div",{className:"card-body",children:Object(d.jsx)("h5",{className:"card-title",children:n.toUpperCase()})}),Object(d.jsx)(i.b,{className:"nav-link",to:r,children:Object(d.jsx)("button",{type:"button",className:"btn btn-dark",children:"Ver productos"})})]},n)},F=function(e){for(var t=e.productos,c=[],n=function(e){c.some((function(c){return c.category==t[e].category}))||c.push(t[e])},r=0;r<t.length;r++)n(r);return Object(d.jsx)(d.Fragment,{children:c.map((function(e){return Object(d.jsx)(E,{category:e},e.category)}))})},P=function(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),c=t[0],r=t[1];return Object(n.useEffect)((function(){function e(){return(e=Object(p.a)(x.a.mark((function e(){var t,c,n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Object(I.g)(y),c=Object(I.c)(t,"items"),e.next=5,Object(I.f)(c);case 5:if(n=e.sent,a=n.docs.map((function(e){return e.data()})),0!==!I.c.size){e.next=10;break}return console.log("Collection does not exist"),e.abrupt("return");case 10:console.log("Collection found"),r(a),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log("Error serching items",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),c.length<=0?Object(d.jsx)(d.Fragment,{children:"Cargando..."}):Object(d.jsx)("div",{className:"Productos-list container",children:Object(d.jsx)(F,{productos:c})})},q=function(e){return Object(d.jsx)("div",{children:Object(d.jsxs)("h3",{children:["Tu orden fue confirmada! El numero de orden es: ",e.orderId]})})},D=function(){var e=Object(n.useContext)(b),t=e.cart,c=e.removeItem,r=Object(n.useState)(""),a=Object(j.a)(r,2),s=a[0],o=a[1],l=Object(n.useState)(""),u=Object(j.a)(l,2),h=u[0],O=u[1],m=Object(n.useState)(""),f=Object(j.a)(m,2),g=f[0],v=f[1],N=Object(n.useState)(0),C=Object(j.a)(N,2),w=C[0],I=C[1],S=Object(n.useState)(null),E=Object(j.a)(S,2),F=E[0],P=E[1],D=0;t.forEach((function(e){D+=e.price*e.quantity}));var A=function(e){switch(e.target.name){case"name":o(e.target.value);break;case"surename":O(e.target.value);break;case"email":v(e.target.value);break;case"phone":I(e.target.value);break;default:console.log("error de input")}},z=function(){var e=Object(p.a)(x.a.mark((function e(c){var n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.prev=1,n=Object(k.e)(y),e.next=5,Object(k.b)(Object(k.c)(n,"orders"),{buyer:{name:s,surename:h,phone:w,email:g},items:t,date:k.a.now(),total:D});case 5:r=e.sent,console.log("Document written with ID: ",r.id),P(r.id),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("Error emitting order",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Carrito"}),0===t.length?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{children:"No hay productos en el carrito"}),Object(d.jsx)(i.b,{className:"nav-link",to:"/",children:Object(d.jsx)("button",{type:"button",className:"btn btn-dark",children:"Ver Productos"})})]}):t.map((function(e){return Object(d.jsx)("div",{children:Object(d.jsxs)("table",{className:"table table-hover cart-table",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{scope:"col",children:"Producto"}),Object(d.jsx)("th",{scope:"col",children:"Descripcion"}),Object(d.jsx)("th",{scope:"col",children:"Count"}),Object(d.jsx)("th",{scope:"col",children:"Price"}),Object(d.jsx)("th",{scope:"col",children:"Delete"})]})}),Object(d.jsx)("tbody",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:e.title}),Object(d.jsx)("td",{children:e.description}),Object(d.jsx)("td",{children:e.quantity}),Object(d.jsx)("td",{children:e.price}),Object(d.jsx)("td",{children:Object(d.jsx)("button",{onClick:function(){c(e.id)},children:Object(d.jsx)("span",{className:"material-icons",children:"delete"})})})]})})]})})})),Object(d.jsxs)("h4",{children:["Precio total: ",D]})]}),Object(d.jsxs)("div",{className:"comprar",children:[Object(d.jsx)("h2",{children:"Comprar"}),Object(d.jsx)("p",{children:"Completa los siguientes datos y confirma tu compra   !"}),Object(d.jsxs)("form",{className:"cart-form",onSubmit:z,children:[Object(d.jsx)("label",{name:"name",children:"Nombre:"}),Object(d.jsx)("input",{type:"text",name:"name",id:"name",onChange:A,required:!0}),Object(d.jsx)("label",{name:"apellido",children:"Apellido:"}),Object(d.jsx)("input",{type:"text",name:"surename",id:"surename",onChange:A,required:!0}),Object(d.jsx)("label",{name:"email",children:"Email:"}),Object(d.jsx)("input",{type:"email",name:"email",id:"email",onChange:A,required:!0}),Object(d.jsx)("label",{name:"phone",children:"Tel\xe9fono:"}),Object(d.jsx)("input",{type:"number",name:"phone",id:"phone",onChange:A,required:!0}),Object(d.jsx)("input",{type:"submit",className:"btn btn-dark",value:"Confirmar Orden"})]}),F?Object(d.jsx)(q,{orderId:F}):""]})]})};var A=function(){return Object(d.jsx)(u,{children:Object(d.jsx)(i.a,{children:Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(O,{}),Object(d.jsxs)(o.c,{children:[Object(d.jsx)(o.a,{exact:!0,path:"/",children:Object(d.jsx)(P,{})}),Object(d.jsx)(o.a,{path:"/categoria/:categoryId",children:Object(d.jsx)(N,{})}),Object(d.jsx)(o.a,{path:"/item/:id",children:Object(d.jsx)(S,{})}),Object(d.jsx)(o.a,{path:"/cart",children:Object(d.jsx)(D,{})})]})]})})})},z=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,59)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),n(e),r(e),a(e),s(e)}))};s.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(A,{})}),document.getElementById("root")),z()}},[[58,1,2]]]);
//# sourceMappingURL=main.f3f3fae4.chunk.js.map